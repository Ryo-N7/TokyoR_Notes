---
title: "81st TokyoR Meetup Roundup: A Special Session in {Shiny}!"
always_allow_html: yes
output: 
  md_document:
    variant: markdown_github
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

As another sweltering summer ends, another TokyoR Meetup! With global warming in full swing and it still being around 30 degrees at the end of September, this month's meetup was held at [DIP Corporation](https://www.dip-net.co.jp/), an personnel/recruitment services company, in their headquarters in Roppongi, Tokyo.

<img src="https://i.imgur.com/UlstyyS.png" style="display: block; margin: auto;" width = "350" />

In line with my previous round up posts:

- [TokyoR #76](https://ryo-n7.github.io/2019-03-07-tokyoR-76-roundup/)
- [TokyoR #77](https://ryo-n7.github.io/2019-04-24-tokyoR-77/)) 
- [TokyoR #78](https://ryo-n7.github.io/2019-05-31-tokyoR-78-roundup/) 
- [TokyoR #79](https://ryo-n7.github.io/2019-07-05-tokyoR-79-roundup/)
- [TokyoR #80](https://ryo-n7.github.io/2019-08-02-tokyoR-80-roundup/)

I will be going over around half of all the talks. Hopefully, my efforts will help spread the vast knowledge of Japanese R users to the wider R community. Throughout I will also post helpful blog posts and links from other sources if you are interested in learning more about the topic of a certain talk. You can follow __Tokyo.R__ by searching for the [#TokyoR](https://twitter.com/hashtag/TokyoR) hashtag on Twitter.

Anyways...

Let's get started!

# BeginneR Session

As with every [TokyoR](http://tokyor.connpass.com/) meetup, we began with a set of beginner user focused talks:

- [R Basics by kilometer0101](https://speakerdeck.com/kilometer/tokyo-dot-r-number-81-introduction-and-demonstration)
- [Shiny for Beginners by kyyonko](https://speakerdeck.com/kyyonko/di-81hui-tokyor-chu-xin-zhe-setusiyon2-hazimetefalseshiny-80e4f56b-198d-4d7d-a4e0-df1097aa226d)

# Main Talks

## [hoxo_m](https://twitter.com/hoxo_m): Asynchronous Programming for Shiny!
* [Slides](https://www.slideshare.net/hoxo_m/shiny-177170789)

`@hoxo_m` of HOXO-M Inc. talked about asynchronous programming with Shiny. Starting off with an introduction into the history of single and multi-threadding in both R and how the growing popularity of Shiny has lead to a demand for multithreaddedness to cater to the multitude of users using a Shiny app at once! 

The main package that facilitates this in both R and Shiny is the {future} package which allows one to 


- Synchronous programming: run code one line at a time


- currently: chop up tasks into small components and trade between user A, B, C, etc. in tandem!
- But what about LONG / resource-intensive tasks (getting data from APIs?), thsi means other users have to WAIT even for short/quick tasks 
-- asynchronous: place these tasks in another process and free up time for other user's tasks, reduce responsiveness + waiting time
- use {promises}, {future}: https://rstudio.github.io/promises/articles/shiny.html
- use {promise} pipeline with `%...>%` pipe!
- `future({ long_task }) %...>%`
- {future} pkg
- insert long-task code INTO `future()` function 
- `plan()` 
-- multisession:
-- multicore:
-- multiprosess:
- how to grab the results from another process?
- {promise}: `render_*()` can take promises
-- promise: an object that takes a result from an asynchronous process that happens later/slightly later
-- takes the result from {future} pkg code result
-- "promise", until the result from "future" appears, it will WAIT until it appears/runs
-- `future` is NOT a data frame so can not `filter()`, so must use the "promise pipe" `%...>%` and then code!!
- Application to Shiny apps
-- can't use reactives inside a `future()`, need to create as object BEFORE and pass that through!
-- need to think about WHERE (which process?) the code is running 
-- can't put `plot()`/`print()` code inside the `future()` process, must promise pipe!
-- if reactive is in FUTURE >>> then subsequent code using that object must be promise-piped!
-

## [Np_Ur](https://twitter.com/Np_Ur_): A Simple Shiny App in 30 Minutes!
* [Slides](https://github.com/chan-ume/tokyoR81)

`@Np_Ur` is known in the Japan community for his love of {shiny}, he even wrote a book on it called "Building Web Applications in R with Shiny". This presentation was largely a demonstration as `@Np_Ur` explained, from the ground up, a lot of the basic functions that can get you a working Shiny app in the space of 30 minutes! From creating a navigation bar via `navbarPage()` to creating different drop-down options for customizing a plot and talking about extra functionality from other packages such as {DT} and {shinycssloaders}, `@Np_Ur` took us through the code and showed us completed Shiny apps for each step of the way. 

![]()

I recommend going through his slides (also hosted on Shiny) as well as checking out the code for each of the Shiny apps he made for all different functionalities he talked about by clicking on the link below! 

- [Code for all Shiny Apps](https://github.com/chan-ume/tokyoR81)

## [kashitan](https://twitter.com/kashitan/): Making {shiny} Maps with {leaflet}!
* [Slides](https://www.slideshare.net/kashitan/shinyleaflettips-177070514)

`@kashitan` presented some tips (that you normally won't see in books/articles) for using {leaflet} with Shiny for map applications! He tooks us through four different functions that he found very useful for making {leaflet} maps with Japan census data. 

The first function: `updateSelectInput()` allows you to update a dropdown menu with new values after selecting a certain input. In `@kashitan`'s case using the Japan census Shiny app, he wanted to be able to update the choices of the city/district after choosing a different prefecture on the app. Using the `updateSelectInput()` function the list of choices from the drop down menu updates to the city/districts of the newly chosen prefecture!

![]()

You can check out the documentation [here](https://shiny.rstudio.com/reference/shiny/1.2.0/updateSelectInput.html).

The second function: `leafletProxy()` allows you to customize a {leaflet} map even after it has been rendered by Shiny. For `@kashitan` this was necessary as he didn't want the map's active zoom level and center coordinates to change even after choosing a new prefecture to look at.

![]()

The third function: `fitBounds()` allows you to set the boundaries of the map. For `@kashitan` similar to the previous function shown, he wanted the bounds to the view, following a change in the city/district, to always be within a certain bounding box. 

The last function: `input${id}shape_click` shows you information about the polygon shape of the map you just clicked. {leaflet}'s "click" event currently only shows you the coordinate and `id` values from this function.

![]()

- [RStudio's {leaflet} Guide](https://rstudio.github.io/leaflet/)
- [Leaflet in R: Tips & Tricks for Interactive Maps - Jindřich Lacko ](https://www.jla-data.net/eng/leaflet-in-r-tips-and-tricks/index.html)

## [okiyuki](https://twitter.com/okiyuki99): Software Engineering for Shiny!
* [Slides](https://speakerdeck.com/okiyuki99/190928-tokyor81-shiny)

`@okiyuki` presented on the various R packages used for the software engineering that goes into supporting Shiny apps. 


- {memoise}: cache data when certain function is run for the first time (useful for dashboard shiny apps where similar use cases can be predicted)
-- cache data in certain file/directory 
- {pool}: insert/access SQL database connection info, close when app closes!
- {ShinyProxy}:
- {Shinyloadtest}:

`@okiyuki` also talked about some of his personal struggles and pitfalls that he's come across when building Shiny apps at work. These include:

-
-
-


An extra section talked about various helpful packages for Shiny app aesthetics such as:

- {shinycssloaders}: 
- {shinyace}: 
- [dreamRs]()' suite of Shiny packages such as {shinyWidgets}
-- I introduced some of dreamRs' packages in my useR!2019 blog post [here](https://ryo-n7.github.io/2019-07-21-user2019-reflections/).
- Various packages to create Shiny Templates: {bs4dash}, {shinymaterial}, {fullpage}, {shiny.semantic}


# LTs

## [igjit](https://twitter.com/igjit): Edit Your Photos with {shinyroom}!
* [Slides](https://igjit.github.io/slides/2019/09/shinyroom/#/)

You might remember from a few months back, `@igjit` presented on "RAW image processing with R" ([TokyoR #79](https://ryo-n7.github.io/2019-07-05-tokyoR-79-roundup/)). Continuing where he left off he decided to create a photo-editing UI using the power of {shiny}. Motivated by comments following the previous presentation, `@igjit` decided to base it on "Adobe Lightroom", and call it the {shinyroom} package. You can take a look at it [here](https://shinyroom.herokuapp.com/). 

![]()

In terms of actually building the Shiny app he used the {imager} package for the actual photo editing functionality while {golem} was used as the package framework for the app. For appearances `@igjit` used the {shinythemes} package

During the course of building the app, `@igjit` came across a peculiar problem concerning the screen when the Shiny app was busy. By default, a particular panel becomes slightly opaque when the server is busy doing stuff in the background but this is annoying when you are working on editing images. To get around this problem, `@igjit` created another package called {shinyloadermessage} so that instead of the screen greying out a small message will appear instead.

- [Building Big Shiny Apps - A Workflow (Colin Fay, Vincent Guyader, Cervan Girard, Sebastien Rochette)](https://thinkr-open.github.io/building-shiny-apps-workflow/)
- [{shinyloadermessage}: Loader messages for Shiny outputs](https://github.com/igjit/shinyloadermessage)
- [{shinybusy}: For minimal busy indicator in Shiny apps](https://github.com/dreamRs/shinybusy)

## [flaty13](https://twitter.com/flaty13): Reproducible Shiny with {shinymeta}!
* [Slides](https://docs.google.com/presentation/d/1aHRVEE05L7HO90TsTTFNsJZsVH-oI2umYlNR3NuXbac/edit)

`@flaty13` talked about the recently made public {shinymeta} package and reproducibility with Shiny apps. This is a topic that has taken a while to develop due to the complexity of the issue, where the end goal was to find a way to document and describe the actions of users who interacted with very dynamic Shiny apps with many different features. With the {shinymeta} package you can now download R scripts highlight the steps you took in interacting with the app. 
![]()

The next step that is currently in development is to output an `.RMD` report among a number of other features as the package is still in the experimental phase. See the resources below for more details, especially Joe Cheng's keynote for all the stuff under-the-hood that's making this exciting new development possible!

- [{shinymeta} Github page](https://github.com/rstudio/shinymeta)
- [Summary of {shinymeta} from useR!2019 blog post](https://ryo-n7.github.io/2019-07-21-user2019-reflections/)
- ["Shiny's Holy Grail: Interactivity with Reproducibility": Joe Cheng's useR!2019 Keynote](https://www.youtube.com/watch?v=mhDxTIz0-0M)

# Food, Drinks, and Conclusion

`TokyoR` happens almost monthly and it’s a great way to mingle with Japanese R users as it's the largest regular meetup here in Japan. The next meetup will be on October 26 and I will also be one of the presenters!

Talks in English are also welcome so if you’re ever in Tokyo come join us!